<!doctype html>
<html lang="zh"><head>
<title>APT源转Docker环境变量转换工具 - HomeLabProject</title>
<meta charset="UTF-8">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

<link rel="shortcut icon" href="/images/cloud.avif" type="image/x-icon" />
<meta name="description" content="APT源转Docker环境变量转换工具      工具介绍   该工具用于将Debian&#x2F;Ubuntu系统的APT源地址转换为Docker镜像源部署时所需的环境变量格式。      使用说明        在下方输入框中粘贴您的APT源地址（每行一个deb条目）     点击&quot;转换&quot;按钮，即可在下方获得转换后的环境变量     点击&quot;复制结果&quot;按钮复制转换结果         支持的格式">
<meta property="og:type" content="website">
<meta property="og:title" content="APT源转Docker环境变量转换工具">
<meta property="og:url" content="https://homelabproject.cc/tools/apt-converter/index.html">
<meta property="og:site_name" content="HomeLabProject">
<meta property="og:description" content="APT源转Docker环境变量转换工具      工具介绍   该工具用于将Debian&#x2F;Ubuntu系统的APT源地址转换为Docker镜像源部署时所需的环境变量格式。      使用说明        在下方输入框中粘贴您的APT源地址（每行一个deb条目）     点击&quot;转换&quot;按钮，即可在下方获得转换后的环境变量     点击&quot;复制结果&quot;按钮复制转换结果         支持的格式">
<meta property="og:locale">
<meta property="article:published_time" content="2024-06-22T15:00:00.000Z">
<meta property="article:modified_time" content="2025-05-30T02:24:22.280Z">
<meta property="article:author" content="Channing He">
<meta name="twitter:card" content="summary">

<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


<link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1748571875110">

<link rel="stylesheet" href="/css/style.css?v=1748571875110">




    
        <link rel="stylesheet" href="/custom.css?v=1748571875110">
    



<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>
<script src="/lib/lax.min.js" async></script>


<script async src="/js/app.js?v=1748571875111"></script>

 

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HPN9ZE6SCR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HPN9ZE6SCR');
</script>
<script defer src="/_vercel/speed-insights/script.js"></script>


<link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#90a4ae;--hl-bg:#f6f8fa;--hltools-bg:#e6ebf1;--hltools-color:#90a4ae;--hlnumber-bg:#f6f8fa;--hlnumber-color:rgba(144,164,174,0.5);--hlscrollbar-bg:#dce4eb;--hlexpand-bg:linear-gradient(180deg,rgba(246,248,250,0.1),rgba(246,248,250,0.9))}</style>
    <style>
    .code-expand-btn:not(.expand-done) ~ div.codeblock,
    .code-expand-btn:not(.expand-done) ~ * div.codeblock {
      overflow: hidden;
      height: 360px;
    }
    </style>
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="nexmoe mdui-drawer-body-left"><div id="nexmoe-background"><div class="nexmoe-bg" style="background-image: url(/images/default.avif)"></div><div class="mdui-appbar mdui-shadow-0"><div class="mdui-toolbar"><a class="mdui-btn mdui-btn-icon mdui-ripple" mdui-drawer="{target: &#039;#drawer&#039;, swipe: true}" title="menu"><i class="mdui-icon nexmoefont icon-menu"></i></a><div class="mdui-toolbar-spacer"></div><a class="mdui-btn mdui-btn-icon" href="/" title="Channing He"><img src="/images/cloud.avif" alt="Channing He"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Channing He">
            <img src="/images/cloud.avif" alt="Channing He" alt="Channing He">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>Articles</span>13</div>
        <div><span>Tags</span>8</div>
        <div><span>Categories</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/posts/" title="文章列表">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章列表
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" target="_blank" rel="noopener" href="https://file.homelabproject.cc/" title="云盘">
            <i class="mdui-list-item-icon nexmoefont icon-ellipsis"></i>
            <div class="mdui-list-item-content">
                云盘
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" target="_blank" rel="noopener" href="https://github.com/tvvocold/How-To-Ask-Questions-The-Smart-Way/" title="提问的艺术">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                提问的艺术
            </div>
        </a>
        
    </div>
    
    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:homelabproject.cc" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="Search"></label>
            </form>
         
    </div>
</div>




    
        
        <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://qm.qq.com/q/7pRlgcBzhY"
			target="_blank"
			mdui-tooltip="{content: '大佬的QQ群'}"
			style="
				color: rgb(249, 174, 8);
				background-color: rgba(249, 174, 8, .1);
			"
		>
			<i
				class="nexmoefont icon-QQ"
			></i> </a
		>
	</div>
</div>

    
        
        
        
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Hardware/" style="font-size: 10px;">Hardware</a> <a href="/tags/Incus/" style="font-size: 10px;">Incus</a> <a href="/tags/Infra/" style="font-size: 15px;">Infra</a> <a href="/tags/Others/" style="font-size: 15px;">Others</a> <a href="/tags/ProxmoxVE/" style="font-size: 10px;">ProxmoxVE</a> <a href="/tags/RouterOS/" style="font-size: 10px;">RouterOS</a> <a href="/tags/TrueNAS/" style="font-size: 20px;">TrueNAS</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(17);
        var tags_length = parseInt(8);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

    
        
        
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">Recent Posts</h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/Infra/Hexo%20Blog%E6%96%B9%E6%A1%88/">Hexo Blog方案</a>
          </li>
        
          <li>
            <a href="/Infra/%E8%87%AA%E5%BB%BA%20APT%20%E9%95%9C%E5%83%8F%E6%BA%90%20Tunasync%20CRON%E5%AE%9A%E6%97%B6%20%E5%A4%9A%E7%BA%BF%E7%A8%8B/">自建 APT 镜像源 Tunasync CRON定时 多线程</a>
          </li>
        
          <li>
            <a href="/TrueNAS/TrueNAS%2025.04%20%20Docker%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%EF%BC%88%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90UID%E7%AF%87%EF%BC%89/">TrueNAS 25.04 Docker最佳实践（文件权限篇）</a>
          </li>
        
          <li>
            <a href="/Others/Mellanox%20SN2700%20%E9%A3%8E%E6%89%87%20%E6%94%B9%E9%80%A0/">Mellanox SN2700 风扇 改造</a>
          </li>
        
          <li>
            <a href="/TrueNAS/TrueNAS%20%E6%97%A5%E5%BF%97%E8%BF%87%E5%A4%9A%20debug/">TrueNAS 日志过多</a>
          </li>
        
      </ul>
    </div>
  </div>

    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-link">
		<ul>
        
            <li>
                <a href="https://homelabproject.cc/" target="_blank" >
                    <img src="/images/notenterprise.avif" alt="你家不开IDC吗？"></img>
                    <p>你家不开IDC吗？</p>
                </a>
            </li>
        
		</ul>
    </div>
</div>
<style>
.nexmoe-widget-wrap .nexmoe-link ul li a {
    text-align : center;
}
.nexmoe-widget-wrap .nexmoe-link ul li a img {
    max-width : 100%;
}
.nexmoe-widget-wrap .nexmoe-link ul li a p {
    margin: 10px 0;
}
</style>

    
   
    <div class="nexmoe-copyright">
        &copy; 2025 Channing He
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br><a target="_blank" href="https://homelabproject.cc/"> HomieLab </a>

    </div>
</div><!-- .nexmoe-drawer --></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover"> 
            <img src="/images/default.avif" alt="APT源转Docker环境变量转换工具" loading="lazy">
            <h1>APT源转Docker环境变量转换工具</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2024年06月23日</a>
        
        
    </div>
    
    
    
    
    
</div>

    
<div style="max-width: 800px; margin: 0 auto; padding: 20px;">
  <h2>APT源转Docker环境变量转换工具</h2>
  
  <h3>工具介绍</h3>
  <p>该工具用于将Debian/Ubuntu系统的APT源地址转换为Docker镜像源部署时所需的环境变量格式。</p>
  
  <h3>使用说明</h3>
  <ol>
    <li>在下方输入框中粘贴您的APT源地址（每行一个deb条目）</li>
    <li>点击"转换"按钮，即可在下方获得转换后的环境变量</li>
    <li>点击"复制结果"按钮复制转换结果</li>
  </ol>
  
  <h3>支持的格式</h3>
  <ul>
    <li>标准APT源：<code>deb https://example.com/debian bookworm main</code></li>
    <li>带架构的APT源：<code>deb [arch=arm64,amd64] https://example.com/debian bookworm main</code></li>
    <li>带目录的APT源：<code>deb https://example.com/debian bookworm main/debian-installer</code></li>
    <li>多组件APT源：<code>deb https://example.com/debian bookworm main contrib non-free</code></li>
  </ul>
  
  <hr style="margin: 30px 0;">
  
  <div id="apt-converter-tool">
    <div class="converter-section">
      <h4>输入APT源</h4>
      <textarea id="apt-input" placeholder="例如：deb [arch=amd64,arm64] https://example.com/debian bookworm main" rows="8" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 14px; background: var(--color-block, #f9f9f9); color: var(--color-text, #333); box-sizing: border-box;"></textarea>
      
      <div class="button-group" style="margin: 15px 0; text-align: center;">
        <button onclick="convertSources()" style="margin: 5px; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; background: #4CAF50; color: white;">转换</button>
        <button onclick="loadExample()" style="margin: 5px; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; background: #2196F3; color: white;">加载示例</button>
        <button onclick="clearAll()" style="margin: 5px; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; background: #f44336; color: white;">清空</button>
      </div>
      
      <h4>转换结果</h4>
      <textarea id="apt-output" readonly rows="8" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 14px; background: var(--color-block, #f9f9f9); color: var(--color-text, #333); box-sizing: border-box;"></textarea>
      <button onclick="copyResult()" style="margin: 5px 0; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; background: #FF9800; color: white;">复制结果</button>
    </div>
  </div>
</div>

<script>
function convertSources() {
  const input = document.getElementById('apt-input').value.trim();
  if (!input) {
    alert('请输入APT源');
    return;
  }
  
  const result = parseAptSources(input);
  document.getElementById('apt-output').value = result;
}

function loadExample() {
  document.getElementById('apt-input').value = `# Proxmox混合源示例
deb [ arch=amd64,arm64,loong64 ] https://download.lierfang.com/pxcloud/pxvirt/ bookworm main
deb [ arch=amd64,arm64 ] https://download.lierfang.com/pxcloud/pxvirt/ bookworm ceph-squid
deb [ arch=amd64,arm64 ] https://download.lierfang.com/pxcloud/pxvirt/ bookworm ceph-reef
deb [ arch=amd64 ] https://download.lierfang.com/pxcloud/pxvirt/ bookworm ceph-quincy

# Tailscale示例
deb [arch=arm64,amd64] https://pkgs.tailscale.com/stable/debian bullseye main
deb [arch=arm64,amd64] https://pkgs.tailscale.com/stable/debian bookworm main`;
}

function clearAll() {
  document.getElementById('apt-input').value = '';
  document.getElementById('apt-output').value = '';
}

function copyResult() {
  const output = document.getElementById('apt-output');
  if (!output.value) {
    alert('没有可复制的内容');
    return;
  }
  
  output.select();
  if (navigator.clipboard) {
    navigator.clipboard.writeText(output.value).then(() => {
      alert('已复制到剪贴板');
    }).catch(() => {
      document.execCommand('copy');
      alert('已复制到剪贴板');
    });
  } else {
    document.execCommand('copy');
    alert('已复制到剪贴板');
  }
}

function parseAptSources(input) {
  const lines = input.split('\n')
    .map(line => line.trim())
    .filter(line => line && line.startsWith('deb') && !line.startsWith('#'));
  
  if (lines.length === 0) {
    return '未找到有效的APT源行';
  }
  
  // 按URL分组
  const urlGroups = {};
  
  lines.forEach(line => {
    try {
      const parsed = parseLine(line);
      if (!parsed) return;
      
      const { url, dist, components, arch } = parsed;
      
      if (!urlGroups[url]) {
        urlGroups[url] = [];
      }
      
      urlGroups[url].push({ dist, components, arch });
    } catch (error) {
      console.warn('解析失败:', line, error);
    }
  });
  
  // 生成环境变量
  let result = '';
  
  Object.keys(urlGroups).forEach(url => {
    result += `APTSYNC_URL=${url}\n\n`;
    
    const dists = urlGroups[url];
    let distsStr = 'APTSYNC_DISTS=';
    
    dists.forEach((dist, index) => {
      if (index > 0) distsStr += ':';
      // 格式: release|component|arch|download_dir
      distsStr += `${dist.dist}|${dist.components}|${dist.arch}|`;
    });
    
    result += distsStr + '\n\n';
  });
  
  return result.trim();
}

function parseLine(line) {
  // 先处理架构选项，然后再按空格分割
  let cleanLine = line.trim();
  let arch = 'amd64';
  
  // 检查是否有架构选项
  const archMatch = cleanLine.match(/\[\s*arch\s*=\s*([^\]]+)\s*\]/);
  if (archMatch) {
    arch = archMatch[1].split(',').map(a => a.trim()).join(' ');
    // 移除架构选项部分
    cleanLine = cleanLine.replace(/\[\s*arch\s*=\s*[^\]]+\s*\]/, '').replace(/\s+/g, ' ').trim();
  }
  
  const parts = cleanLine.split(' ');
  
  if (parts[0] !== 'deb' || parts.length < 4) {
    return null;
  }
  
  const url = parts[1].replace(/\/$/, '');
  const dist = parts[2];
  const components = parts.slice(3).join(' ').split('/')[0];
  
  return { url, dist, components, arch };
}
</script> 
    <p><img src="/images/logo1.png" loading="lazy"></p>

  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>Author：</strong>Channing He<br>
        <strong>Link：</strong><a href="https://homelabproject.cc/tools/apt-converter/index.html" title="https:&#x2F;&#x2F;homelabproject.cc&#x2F;tools&#x2F;apt-converter&#x2F;index.html" target="_blank" rel="noopener">https:&#x2F;&#x2F;homelabproject.cc&#x2F;tools&#x2F;apt-converter&#x2F;index.html</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
</div>
  
  

  
      <div class="nexmoe-post-footer">
          <script src="https://giscus.app/client.js"
        data-repo="ChanningHe/hlpj-hexo"
        data-repo-id="R_kgDOOuV1-Q"
        data-category="General"
        data-category-id="DIC_kwDOOuV1-c4CqgOV"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

      </div>
  
</div></div><div class="nexmoe-post-right">    <div class="nexmoe-fixed">
        <div class="nexmoe-tool">

            

            
            
            <button class="mdui-fab catalog" style="overflow:unset;">
                <i class="nexmoefont icon-i-catalog"></i>
                <div class="nexmoe-toc">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">APT源转Docker环境变量转换工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">工具介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">使用说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">支持的格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#apt-converter-tool"><span class="toc-number">1.3.1.</span> <span class="toc-text">输入APT源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#apt-converter-tool"><span class="toc-number">1.3.2.</span> <span class="toc-text">转换结果</span></a></li></ol></li></ol></li></ol>
                </div>
            </button>
            

            

            <a href="#nexmoe-content" class="backtop toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
        </div>
    </div>
</div></div><div id="nexmoe-footer"><!--!--></div><div id="nexmoe-search-space"><div class="search-container"><div class="search-header"><div class="search-input-container"><input class="search-input" type="text" placeholder="Search" onInput="sinput();"></div><a class="search-close" onclick="sclose();">×</a></div><div class="search-body"></div></div></div><div></div><!-- hexo injector body_end start -->
  <script>
  const CODE_CONFIG = {
    beautify: false,
    highlightCopy: true,
    highlightLang: true,
    highlightHeightLimit: 360,
    isHighlightShrink: false,
    copy: {
      success: 'Copy Success',
      error: 'Copy Error',
      noSupport: 'Browser Not Support',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body></html>